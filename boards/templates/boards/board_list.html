{% extends "base_boards.html" %}

{% block content %}
{% load staticfiles%}
{% load humanize %}



<div class="container">
    <div class="me_title2 col-md-12 co-xs-12"><a href="{%url 'boards:index'%}">
        <span class="glyphicon glyphicon glyphicon-bullhorn" aria-hidden="true"></span> 공유게시판</a> > <a
            href="{%url 'boards:board_topic' pk=board.pk%}">{{board.name}}</a></div>

    <div class="panel panel-success">
        <div class="panel-body">
            <table class="table table-striped">
                <thead class="thead-inverse">
                <tr>
                    <th class="col-md-6 col-xs-6">주제</th>
                    <th class="col-md-2 col-xs-2">작성자</th>
                    <th class="col-md-2 col-xs-2">조회수</th>
                    <th class="col-md-2 col-xs-2">등록일</th>
                </tr>
                </thead>
                <tbody>
                {% for topic in topic_list %}
                <tr>
                    <td>
                        <a href="{% url 'boards:board_content' pk=topic.board.id topic_pk=topic.id %}">
                            {{ topic.title }}({{topic.post.count|default:"0"}})
                        </a>
                    </td>
                    <td><span><img src="{{topic.user.userprofile.thumbnail.url}}"
                                   style="width:30px;height:30px;"></span>
                        {{topic.user.username }}
                    </td>
                    <td>
                        {{topic.views}}
                    </td>
                    <td>
                        {% if topic.updated_at is None%}
                        {{ topic.created_at|naturaltime }}
                        {% else%}
                        {{ topic.updated_at|naturaltime }}
                        {% endif%}
                    </td>
                </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    <div class="row">
        <div class="col-xs-12 col-md-push-10 col-md-2">
            <a href="{% url 'boards:add_content' board.id %}" class="btn btn-success btn-block">글쓰기</a>
        </div>
    </div>
    <div class="container" align="center">
        {% if is_paginated %}
        <div class="container" align="center">
            <nav aria-label="Topics pagination" class="mb-4">
                <ul class="pagination pagination-sm">
                    {% if page_obj.number > 1 %}
                    <li class="page-item">
                        <a class="page-link" href="?page=1"> << </a>
                    </li>
                    {% else %}
                    <li class="page-item disabled">
                        <span class="page-link"> << </span>
                    </li>
                    {% endif %}

                    {% if has_previous_index %}
                    <li class="page-item">
                        <a class="page-link" href="?page={{ previous_index }}"> < </a>
                    </li>
                    {% else %}
                    <li class="page-item disabled">
                        <span class="page-link"> < </span>
                    </li>
                    {% endif %}

                    {% for page in page_range %}
                    {% if page == page_obj.number %}
                    <li class="active">
                        {% else%}
                    <li>
                        {% endif %}
                        <a href="?page={{ page }}">{{ page }}</a>
                    </li>
                    {% endfor %}


                    {% if has_next_index %}
                    <li class="page-item">
                        <a class="page-link" href="?page={{ next_index }}"> > </a>
                    </li>
                    {% else %}
                    <li class="page-item disabled">
                        <span class="page-link"> > </span>
                    </li>
                    {% endif %}

                    {% if page_obj.number != paginator.num_pages %}
                    <li class="page-item">
                        <a class="page-link" href="?page={{ paginator.num_pages }}"> >> </a>
                    </li>
                    {% else %}
                    <li class="page-item disabled">
                        <span class="page-link"> >> </span>
                    </li>
                    {% endif %}
                </ul>
            </nav>
        </div>
        {% endif %}
    </div>


</div>

{% endblock content %}